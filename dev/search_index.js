var documenterSearchIndex = {"docs":
[{"location":"jump/#JuMP-adapter","page":"JuMP Adapter","title":"JuMP adapter","text":"The JuMP adapter converts a solved JuMP model into the DualSignals data model. It is intentionally conservative and focuses on scalar constraints with duals.","category":"section"},{"location":"jump/#Function","page":"JuMP Adapter","title":"Function","text":"jump_dataset(model; dataset_id=\"jump_model\", include_variables=true, include_constraints=true, include_constraint_solutions=true, kind_hint=_default_kind_hint, tag_hint=_default_tag_hint)","category":"section"},{"location":"jump/#What-it-does","page":"JuMP Adapter","title":"What it does","text":"Creates one Component per JuMP variable.\nCreates Constraint entries for scalar <=, >=, and == constraints.\nUses JuMP.dual for dual values when available.\nStores variable values as VariableValue entries.\n\nConstraint kinds are inferred from constraint names (e.g., balance, cap, limit, policy). You can provide a custom kind_hint function to override the defaults. Constraint tags are supported via tag_hint(label, kind) to attach additional grouping labels (by default no tags are added).","category":"section"},{"location":"jump/#Limitations","page":"JuMP Adapter","title":"Limitations","text":"Only scalar constraints are mapped (vector/PSD constraints are skipped).\nNo automatic units; set units_convention manually if needed.\nConstraint component mapping uses variables in the constraint body.","category":"section"},{"location":"jump/#Example","page":"JuMP Adapter","title":"Example","text":"using JuMP\nusing DualSignals\nimport HiGHS\n\nmodel = Model(HiGHS.Optimizer)\n@variable(model, x >= 0)\n@variable(model, y >= 0)\n@constraint(model, c1, x + y <= 10)\n@objective(model, Min, x + 2y)\noptimize!(model)\n\ndataset = jump_dataset(model; dataset_id=\"simple_jump\")","category":"section"},{"location":"api/#API","page":"API","title":"API","text":"","category":"section"},{"location":"api/#DualSignals.Component","page":"API","title":"DualSignals.Component","text":"Component in the model (node, link, sector, etc.).\n\ncomponent_id should be unique within a dataset.\n\n\n\n\n\n","category":"type"},{"location":"api/#DualSignals.ComponentType","page":"API","title":"DualSignals.ComponentType","text":"High-level category for model components.\n\n\n\n\n\n","category":"type"},{"location":"api/#DualSignals.Constraint","page":"API","title":"DualSignals.Constraint","text":"Constraint metadata with sense, kind, and component references.\n\ncomponent_ids should refer to Component.component_id values.\n\n\n\n\n\n","category":"type"},{"location":"api/#DualSignals.ConstraintKind","page":"API","title":"DualSignals.ConstraintKind","text":"High-level category for constraints.\n\nbalance: flow or nodal balance.\ncapacity: upper/lower bounds or limits.\nresource: resource availability constraints.\npolicy_cap: policy-driven caps (emissions, quotas).\ntechnology: technology-driven bounds.\n\n\n\n\n\n","category":"type"},{"location":"api/#DualSignals.ConstraintSense","page":"API","title":"DualSignals.ConstraintSense","text":"Constraint sense (<=, =, >=).\n\nle: less-than-or-equal\neq: equality\nge: greater-than-or-equal\n\n\n\n\n\n","category":"type"},{"location":"api/#DualSignals.ConstraintSolution","page":"API","title":"DualSignals.ConstraintSolution","text":"Solution record for a constraint, including dual and optional slack/activity.\n\ndual is required; activity, slack, and is_binding are optional.\n\n\n\n\n\n","category":"type"},{"location":"api/#DualSignals.DatasetMetadata","page":"API","title":"DualSignals.DatasetMetadata","text":"Metadata describing the dataset and objective context.\n\nFields:\n\ndescription: optional description of the dataset.\ncreated_at: optional timestamp for when the dataset was generated.\nobjective_sense: minimize or maximize if known.\nobjective_value: objective value at the solution if known.\nunits_convention: optional units description (e.g., \"MW, USD/MWh\").\nnotes: free-form notes for provenance and assumptions.\n\n\n\n\n\n","category":"type"},{"location":"api/#DualSignals.DualSignalsDataset","page":"API","title":"DualSignals.DualSignalsDataset","text":"Top-level dataset containing metadata, components, constraints, and solutions.\n\ndataset_id should be unique for storage or exchange.\n\n\n\n\n\n","category":"type"},{"location":"api/#DualSignals.ObjectiveSense","page":"API","title":"DualSignals.ObjectiveSense","text":"Objective sense for interpreting dual impacts.\n\nminimize: duals are interpreted directly.\nmaximize: duals are interpreted with reversed sign.\n\n\n\n\n\n","category":"type"},{"location":"api/#DualSignals.VariableValue","page":"API","title":"DualSignals.VariableValue","text":"Value of a variable associated with a component.\n\nname identifies the variable (e.g., \"flow\", \"production\", \"value\").\n\n\n\n\n\n","category":"type"},{"location":"api/#DualSignals.aggregate_duals-Tuple{DualSignalsDataset}","page":"API","title":"DualSignals.aggregate_duals","text":"Aggregate dual values by constraint kind, id, or component id.\n\nKeywords:\n\nby: :kind, :constraint_id, or :component_id.\nscenario: optional scenario filter.\ntime: optional time filter.\n\nReturns a vector of named tuples with key, count, mean, mean_abs, and max_abs.\n\n\n\n\n\n","category":"method"},{"location":"api/#DualSignals.aggregate_duals_series-Tuple{DualSignalsDataset}","page":"API","title":"DualSignals.aggregate_duals_series","text":"Aggregate dual values over time or scenario for each key.\n\nKeywords:\n\nby: :constraint_id, :kind, or :component_id.\nover: :time or :scenario.\nscenario: optional scenario filter.\n\nReturns a vector of named tuples with key, over, count, mean, mean_abs, and max_abs.\n\n\n\n\n\n","category":"method"},{"location":"api/#DualSignals.bindingness-Tuple{DualSignalsDataset}","page":"API","title":"DualSignals.bindingness","text":"Return per-constraint rows with slack, binding flag, and impact labels.\n\nKeywords:\n\ntol: tolerance for binding status when slack is inferred.\n\nReturns a vector of named tuples with: constraint_id, kind, sense, rhs, activity, slack, dual, is_binding, impact, time, scenario.\n\n\n\n\n\n","category":"method"},{"location":"api/#DualSignals.isvalid_dataset-Tuple{DualSignalsDataset}","page":"API","title":"DualSignals.isvalid_dataset","text":"Return true if the dataset has no validation errors.\n\n\n\n\n\n","category":"method"},{"location":"api/#DualSignals.jump_dataset-Tuple{JuMP.Model}","page":"API","title":"DualSignals.jump_dataset","text":"Extract a DualSignalsDataset from a JuMP model and its solution.\n\nKeywords:\n\ndataset_id: dataset identifier for the exported results.\ninclude_variables: include variable values.\ninclude_constraints: include constraint metadata.\ninclude_constraint_solutions: include constraint solutions and duals.\nunits_convention: units description for metadata.\ndescription: optional dataset description.\nkind_hint: function mapping constraint label -> ConstraintKind.\ntag_hint: function mapping (label, kind) -> tags vector or nothing.\n\n\n\n\n\n","category":"method"},{"location":"api/#DualSignals.narrative_policy_summary-Tuple{DualSignalsDataset}","page":"API","title":"DualSignals.narrative_policy_summary","text":"Generate a narrative policy summary with optional extras.\n\nKeywords:\n\ntop: number of rows per summary section.\ntol: tolerance for binding status.\nslack_change: delta slack for relaxation-value metric.\ninclude_duration: include time-weighted bottlenecks (:auto or Bool).\ninclude_slack_change: include relaxation value (:auto or Bool).\n\n\n\n\n\n","category":"method"},{"location":"api/#DualSignals.narrative_top_bottlenecks-Tuple{DualSignalsDataset}","page":"API","title":"DualSignals.narrative_top_bottlenecks","text":"Generate a short narrative summary of top bottlenecks.\n\nKeywords:\n\ntop: number of bottlenecks to include.\ntol: tolerance for binding status.\n\n\n\n\n\n","category":"method"},{"location":"api/#DualSignals.rank_constraints-Tuple{DualSignalsDataset}","page":"API","title":"DualSignals.rank_constraints","text":"Rank constraints by dual-based metrics and return the top rows.\n\nKeywords:\n\nmetric: :abs_dual, :dual, :dual_times_slack, :dual_times_binding_duration, or :dual_times_slack_change.\ntop: number of rows to return.\nkind: filter by ConstraintKind.\nscenario: filter by scenario value.\ntime: filter by time value.\ntol: tolerance for binding status.\nbinding_only: if true, return only binding constraints.\nslack_change: value for :dual_times_slack_change metric.\n\nReturns a vector of named tuples with ranking details.\n\n\n\n\n\n","category":"method"},{"location":"api/#DualSignals.read_arrow-Tuple{AbstractString}","page":"API","title":"DualSignals.read_arrow","text":"Read a dataset from Arrow files written by write_arrow.\n\nArgs:\n\ndir: directory containing the Arrow tables.\n\nKeywords:\n\nprefix: filename prefix for the tables.\n\n\n\n\n\n","category":"method"},{"location":"api/#DualSignals.read_csv-Tuple{AbstractString}","page":"API","title":"DualSignals.read_csv","text":"Read a dataset from CSV tables written by write_csv.\n\nArgs:\n\ndir: directory containing the CSV tables.\n\nKeywords:\n\nprefix: filename prefix for the tables.\n\n\n\n\n\n","category":"method"},{"location":"api/#DualSignals.read_json-Tuple{AbstractString}","page":"API","title":"DualSignals.read_json","text":"Read a DualSignalsDataset from a JSON file.\n\nArgs:\n\npath: path to a JSON file matching the data model.\n\nReturns a DualSignalsDataset.\n\n\n\n\n\n","category":"method"},{"location":"api/#DualSignals.table_policy_priorities-Tuple{DualSignalsDataset}","page":"API","title":"DualSignals.table_policy_priorities","text":"Return a bundle of tables for bottlenecks and capacity priorities.\n\nKeywords:\n\ntop: number of rows per table.\ntol: tolerance for binding status.\nwith_impact: include human-readable impact labels.\nslack_change: delta slack for relaxation-value metric.\ninclude_duration: include time-weighted bottlenecks (:auto or Bool).\ninclude_slack_change: include relaxation value (:auto or Bool).\n\n\n\n\n\n","category":"method"},{"location":"api/#DualSignals.table_top_constraints-Tuple{DualSignalsDataset}","page":"API","title":"DualSignals.table_top_constraints","text":"Return a ranked table of top constraints by the chosen metric.\n\nKeywords:\n\nmetric: :abs_dual, :dual, :dual_times_slack, :dual_times_binding_duration, or :dual_times_slack_change.\ntop: number of rows to return.\ntol: tolerance for binding status.\nbinding_only: if true, return only binding constraints.\n\n\n\n\n\n","category":"method"},{"location":"api/#DualSignals.to_json_string-Tuple{DualSignalsDataset}","page":"API","title":"DualSignals.to_json_string","text":"Serialize a DualSignalsDataset to a JSON string.\n\nKeywords:\n\npretty: pretty-print JSON with indentation.\n\nReturns a String.\n\n\n\n\n\n","category":"method"},{"location":"api/#DualSignals.validate_dataset-Tuple{DualSignalsDataset}","page":"API","title":"DualSignals.validate_dataset","text":"Return a list of validation error strings for a dataset.\n\nKeywords:\n\nrequire_units: if true, require units on constraints, variables, and metadata.\n\nReturns String[] (empty means valid).\n\n\n\n\n\n","category":"method"},{"location":"api/#DualSignals.write_arrow-Tuple{DualSignalsDataset, AbstractString}","page":"API","title":"DualSignals.write_arrow","text":"Write dataset tables to Arrow files in a directory.\n\nArgs:\n\ndataset: dataset to export.\ndir: output directory.\n\nKeywords:\n\nprefix: filename prefix for the tables.\n\n\n\n\n\n","category":"method"},{"location":"api/#DualSignals.write_csv-Tuple{DualSignalsDataset, AbstractString}","page":"API","title":"DualSignals.write_csv","text":"Write dataset tables to CSV files in a directory.\n\nArgs:\n\ndataset: dataset to export.\ndir: output directory.\n\nKeywords:\n\nprefix: filename prefix for the tables.\n\n\n\n\n\n","category":"method"},{"location":"api/#DualSignals.write_json-Tuple{AbstractString, DualSignalsDataset}","page":"API","title":"DualSignals.write_json","text":"Write a DualSignalsDataset to a JSON file.\n\nArgs:\n\npath: output file path.\ndataset: dataset to write.\n\nKeywords:\n\npretty: pretty-print JSON with indentation.\n\nReturns the written path.\n\n\n\n\n\n","category":"method"},{"location":"stdcge/#Standard-CGE-Model","page":"CGE","title":"Standard CGE Model","text":"This example is based on the \"A Standard CGE Model in Ch. 6 (STDCGE, SEQ=276)\" case described in stdcge.gms from the gams-cge repository. It represents a small computable general equilibrium model with two goods (BRD, MLK) and two primary factors (CAP, LAB), calibrated from a social accounting matrix.","category":"section"},{"location":"stdcge/#Reference","page":"CGE","title":"Reference","text":"Hosoe, N, Gasawa, K, and Hashimoto, H   Handbook of Computible General Equilibrium Modeling   University of Tokyo Press, Tokyo, Japan, 2004","category":"section"},{"location":"stdcge/#Source-and-attribution","page":"CGE","title":"Source and attribution","text":"Model description and features:\n\nhttps://github.com/ounokoya/gams-cge/blob/main/stdcge.gms\n\nSolution and duals (GAMS listing/output files):\n\nhttps://github.com/ounokoya/gams-cge/blob/main/stdcge.lst\nhttps://github.com/ounokoya/gams-cge/blob/main/stdcge.gdx\n\nWe extract the solution levels and equation marginals from the repository above, then map them into the DualSignals data model.","category":"section"},{"location":"stdcge/#Derived-DualSignals-dataset","page":"CGE","title":"Derived DualSignals dataset","text":"The DualSignals-formatted output for this example is stored at:\n\nexamples/stdcge/dualsignals_stdcge.json","category":"section"},{"location":"stdcge/#How-the-mapping-was-done","page":"CGE","title":"How the mapping was done","text":"Variables use the LEVEL column from stdcge.lst as VariableValue entries.\nEquation MARGINAL values are used as duals in ConstraintSolution.\nEquation and variable indices are preserved and used to create components.\nScalar equations/variables map to a scalar component.\n\nThis yields a compact, dual-centric dataset suitable for constraint ranking and bindingness analysis in DualSignals.jl.","category":"section"},{"location":"stdcge/#Computed-results-(DualSignals.jl)","page":"CGE","title":"Computed results (DualSignals.jl)","text":"Summary:\n\ncomponents: 13\nconstraints: 47\nconstraint solutions: 47\n\nBecause this dataset does not include binding flags or slack values, the tables below show the top constraints by |dual| without filtering to binding-only.","category":"section"},{"location":"stdcge/#Top-constraints-by-dual","page":"CGE","title":"Top constraints by |dual|","text":"constraint_id kind sense dual impact\neqpm_BRD other eq 1.6865 impact depends on objective sense\neqpzs_BRD other eq 1.5421 impact depends on objective sense\neqpzs_MLK other eq -1.5090 impact depends on objective sense\neqpm_MLK other eq 1.0466 impact depends on objective sense\nobj other eq 1.0000 impact depends on objective sense","category":"section"},{"location":"stdcge/#Top-capacity-constraints-by-dual","page":"CGE","title":"Top capacity constraints by |dual|","text":"No capacity constraints are present in this dataset.","category":"section"},{"location":"stdcge/#Plot:-top-dual-constraints","page":"CGE","title":"Plot: top |dual| constraints","text":"eqpm_BRD               | ############################ 1.6865\neqpzs_BRD              | ########################## 1.5421\neqpzs_MLK              | ######################### 1.5090\neqpm_MLK               | ################# 1.0466\nobj                    | ################# 1.0000","category":"section"},{"location":"stdcge/#Reproducing-the-tables-and-plot","page":"CGE","title":"Reproducing the tables and plot","text":"using DualSignals\n\ndataset = read_json(\"examples/stdcge/dualsignals_stdcge.json\")\ntop = rank_constraints(dataset; top=5, binding_only=false, metric=:abs_dual)\ntop_capacity = rank_constraints(dataset; top=5, binding_only=false, metric=:abs_dual,\n    kind=DualSignals.capacity)","category":"section"},{"location":"example-ieee14-opf/#IEEE-14-bus-OPF-example","page":"IEEE-14 OPF","title":"IEEE 14-bus OPF example","text":"This example uses the classic IEEE 14-bus optimal power flow (OPF) test case. The IEEE 14-bus case is a small, widely used benchmark power network with a handful of generators, loads, and transmission lines, which makes it ideal for checking dual values, binding limits, and nodal price patterns in a realistic yet tractable setting.","category":"section"},{"location":"example-ieee14-opf/#Data-source","page":"IEEE-14 OPF","title":"Data source","text":"The dual solution for this example is taken from the PGLearn dataset collection:\n\nPGLearn Datasets, \"PGLearn Optimal Power Flow (small)\", https://huggingface.co/datasets/PGLearn/PGLearn-Small\n\nFor this IEEE 14-bus example we use a single dual sample from:\n\n14_ieee/test/ACOPF/dual.h5.gz in the PGLearn-Small dataset\n\nThe extracted sample (in the DualSignals data model) lives in this repository at:\n\nexamples/case14_IEEE/dualsignals_dual_sample_1.json\n\nDirect download URL for the source file:\n\nhttps://huggingface.co/datasets/PGLearn/PGLearn-Small/resolve/main/14_ieee/test/ACOPF/dual.h5.gz","category":"section"},{"location":"example-ieee14-opf/#How-this-example-was-derived","page":"IEEE-14 OPF","title":"How this example was derived","text":"The original dual file is an HDF5 archive with many samples. We extracted the first sample (index 1) and mapped each dual vector to constraints in the DualSignals schema:\n\nkcl_p, kcl_q -> bus balance constraints (ConstraintKind.balance, ConstraintSense.eq)\nvm -> bus voltage magnitude limits (ConstraintKind.capacity, ConstraintSense.le)\npg, qg -> generator limits (ConstraintKind.capacity, ConstraintSense.le)\npf, pt, qf, qt, sm_fr, sm_to -> line flow/thermal limits (ConstraintKind.capacity, ConstraintSense.le)\nva_diff, ohm_pf, ohm_pt, ohm_qf, ohm_qt -> physics constraints (ConstraintKind.other, ConstraintSense.eq)\nslack_bus -> slack constraint for bus 1 (ConstraintKind.other, ConstraintSense.eq)\n\nComponents were created for each bus, generator, and line using the counts in the HDF5 arrays (14 buses, 5 generators, 20 lines). This yields a dual-only dataset suitable for constraint ranking and bindingness analysis.","category":"section"},{"location":"example-ieee14-opf/#Computed-results-(DualSignals.jl)","page":"IEEE-14 OPF","title":"Computed results (DualSignals.jl)","text":"Summary:\n\ncomponents: 39\nconstraints: 273\nconstraint solutions: 273\n\nBecause this dataset does not include binding flags or slack values, the tables below show the top constraints by |dual| without filtering to binding-only.","category":"section"},{"location":"example-ieee14-opf/#Top-constraints-by-dual","page":"IEEE-14 OPF","title":"Top constraints by |dual|","text":"constraint_id kind sense dual impact\nvm_8 capacity le -15499.9863 impact depends on objective sense\nkclq1 balance eq 6112.8657 impact depends on objective sense\nqg_1 capacity le -6112.8657 impact depends on objective sense\nohmqf1 other eq -6112.8657 impact depends on objective sense\nohmqf2 other eq -6112.8657 impact depends on objective sense","category":"section"},{"location":"example-ieee14-opf/#Top-capacity-constraints-by-dual","page":"IEEE-14 OPF","title":"Top capacity constraints by |dual|","text":"constraint_id kind sense dual impact\nvm_8 capacity le -15499.9863 impact depends on objective sense\nqg_1 capacity le -6112.8657 impact depends on objective sense\nqg_2 capacity le -5987.9224 impact depends on objective sense\nqg_3 capacity le -5639.9927 impact depends on objective sense\nqg_4 capacity le -5119.9336 impact depends on objective sense","category":"section"},{"location":"example-ieee14-opf/#Plot:-top-dual-constraints","page":"IEEE-14 OPF","title":"Plot: top |dual| constraints","text":"vm_8                   | ############################ 15499.9863\nkcl_q_1                | ########### 6112.8657\nqg_1                   | ########### 6112.8657\nohm_qf_1               | ########### 6112.8657\nohm_qf_2               | ########### 6112.8657","category":"section"},{"location":"example-ieee14-opf/#Reproducing-the-tables-and-plot","page":"IEEE-14 OPF","title":"Reproducing the tables and plot","text":"using DualSignals\n\ndataset = read_json(\"examples/case14_IEEE/dualsignals_dual_sample_1.json\")\ntop = rank_constraints(dataset; top=5, binding_only=false, metric=:abs_dual)\ntop_capacity = rank_constraints(dataset; top=5, binding_only=false, metric=:abs_dual,\n    kind=DualSignals.capacity)","category":"section"},{"location":"notebooks/#Pluto-notebooks","page":"Notebooks","title":"Pluto notebooks","text":"The notebooks/ folder contains simple Pluto.jl notebooks with a shared structure:\n\nLoad data\nValidate/verify\nTables\nGraphs\nNarrative summary","category":"section"},{"location":"notebooks/#Available-notebooks","page":"Notebooks","title":"Available notebooks","text":"notebooks/01_quickstart.jl   Minimal demo using an in‑memory dataset.\nnotebooks/02_ieee14_opf.jl   IEEE 14‑bus OPF dual sample from examples/case14_IEEE/dualsignals_dual_sample_1.json.\nnotebooks/03_stdcge.jl   STDCGE example from examples/stdcge/dualsignals_stdcge.json.","category":"section"},{"location":"notebooks/#Usage","page":"Notebooks","title":"Usage","text":"Start Pluto:\n\nimport Pluto\nPluto.run()\n\nOpen a notebook from the notebooks/ directory.","category":"section"},{"location":"notebooks/#Optional-plotting","page":"Notebooks","title":"Optional plotting","text":"The notebooks can render simple bar charts if UnicodePlots.jl is installed:\n\nimport Pkg\nPkg.add(\"UnicodePlots\")\n\nIf it is not installed, the notebooks will show a small message instead of a plot.","category":"section"},{"location":"analysis/#Analysis-utilities","page":"Analysis","title":"Analysis utilities","text":"The analysis layer turns raw duals, activity, and slack into ranked insights. It focuses on identifying binding constraints and highlighting the largest marginal values that matter for policy decisions.","category":"section"},{"location":"analysis/#Bindingness","page":"Analysis","title":"Bindingness","text":"bindingness(dataset; tol=1e-6) returns a row per constraint solution with:\n\ninferred slack (from activity and RHS, if available)\ninferred binding flag (within tolerance)\ndual values and metadata\nimpact (policy interpretation of the dual sign)\n\nIf slack or activity is missing, the binding flag remains nothing.","category":"section"},{"location":"analysis/#Rankings","page":"Analysis","title":"Rankings","text":"rank_constraints(dataset; metric=:abs_dual, top=10, binding_only=false, ...) returns the top constraints by a chosen metric:\n\n:abs_dual (default) ranks by |dual|\n:dual ranks by signed dual\n:dual_times_slack ranks by |dual| × |slack|\n\nUse filters like kind, time, scenario, and binding_only=true for focused views (e.g., only capacity constraints that are binding).\n\nRanked rows include an impact field that interprets the dual sign in policy terms (e.g., whether increasing a RHS relaxes or tightens the objective), based on objective sense and constraint sense.","category":"section"},{"location":"analysis/#Additional-metrics","page":"Analysis","title":"Additional metrics","text":"You can also use:\n\n:dual_times_binding_duration to prioritize constraints that are binding for many time steps (for time-indexed data).\n:dual_times_slack_change to evaluate a small relaxation, e.g. rank_constraints(...; metric=:dual_times_slack_change, slack_change=0.1).","category":"section"},{"location":"analysis/#Aggregation","page":"Analysis","title":"Aggregation","text":"aggregate_duals(dataset; by=:kind) summarizes duals across groups and returns counts plus mean/mean-absolute/max-absolute duals.\n\naggregate_duals_series(dataset; by=:constraint_id, over=:time) summarizes duals over time or scenario to support time-series reporting.","category":"section"},{"location":"data-model/#DualSignals-data-model-(LinkML)","page":"Data Model","title":"DualSignals data model (LinkML)","text":"This repository defines a small, model-agnostic data model for exporting and exchanging dual-based signals from solved models (network optimization, IO-LP, equilibrium/CGE-as-optimization, etc.). The same model is maintained in:\n\nLinkML (spec/linkml/dualsignals.yaml) as the canonical specification\nJSON Schema (spec/schema/dualsignals.schema.json) generated from LinkML for validation and exchange","category":"section"},{"location":"data-model/#Concept","page":"Data Model","title":"Concept","text":"The core idea is to standardize results around three primitives:\n\nComponents: the “things” you want to talk about (nodes, links, sources, sinks, sectors, products, agents, …).\nConstraints: the model restrictions that refer to components (balances, capacities, resource limits, policy caps, technology limits, …).\nConstraint solutions: the solved information attached to constraints (dual/shadow price, activity, slack, binding status), optionally indexed by time and scenario.\n\nThis is sufficient to compute generic decision-support outputs such as:\n\nwhich constraints are binding,\nwhich bottlenecks have the highest marginal value of relaxation (largest |dual|),\nwhich capacities are most valuable to expand (capacity-kind constraints with high dual),\nnodal price spreads (when balance constraints produce nodal shadow prices).","category":"section"},{"location":"data-model/#Top-level-object","page":"Data Model","title":"Top-level object","text":"All exchanges use a single JSON object of class DualSignalsDataset with keys:\n\ndataset_id (required)\nmetadata (required)\ncomponents (required, list)\nconstraints (required, list)\nconstraint_solutions (required, list)\nvariables (optional, list)","category":"section"},{"location":"data-model/#Classes","page":"Data Model","title":"Classes","text":"","category":"section"},{"location":"data-model/#DatasetMetadata","page":"Data Model","title":"DatasetMetadata","text":"Describes the dataset and optional objective context.\n\nFields:\n\ndescription (optional): free text\ncreated_at (optional): timestamp\nobjective_sense (optional): minimize or maximize\nobjective_value (optional): objective value at the solution\nunits_convention (optional): note on units/currency conventions used\nnotes (optional): free text","category":"section"},{"location":"data-model/#Component","page":"Data Model","title":"Component","text":"Defines the entities in your model.\n\nFields:\n\ncomponent_id (required): unique ID\ncomponent_type (required): enum (node, link, source, sink, sector, product, agent, other)\nname (optional): human-readable label\nparent_id (optional): for hierarchies (e.g., node → region, product → sector)\nunit (optional): primary unit for the component\ntags (optional): list of strings for grouping/filtering","category":"section"},{"location":"data-model/#Constraint","page":"Data Model","title":"Constraint","text":"Defines a model constraint and which components it relates to.\n\nFields:\n\nconstraint_id (required): unique ID\nkind (required): enum (balance, capacity, resource, policy_cap, technology, other)\nsense (required): enum (le, eq, ge)\nrhs (optional): right-hand-side / bound value (numeric)\nunit (optional): unit of the constraint (e.g., MW, tCO2)\ncomponent_ids (required): list of component IDs referenced by the constraint\ntags (optional): list of strings for grouping/filtering\n\nNotes:\n\ncomponent_ids can have 1 entry (e.g., a node balance) or multiple entries (e.g., a constraint involving a set of components).\nFor link capacities, component_ids typically includes the link component ID.","category":"section"},{"location":"data-model/#ConstraintSolution","page":"Data Model","title":"ConstraintSolution","text":"Stores solved quantities attached to a constraint (the “signals”).\n\nFields:\n\nconstraint_id (required): reference to Constraint (by ID)\ndual (required): the dual variable / shadow price / Lagrange multiplier\nactivity (optional): realized LHS value at the solution\nslack (optional): slack for inequalities (0 if binding)\nis_binding (optional): boolean flag (if precomputed)\ntime (optional): ISO-8601 timestamp or period label (e.g., \"2025-01\", \"t=12\")\nscenario (optional): scenario/policy identifier\n\nNotes:\n\ndual is interpreted as the marginal objective change for a marginal relaxation of the associated constraint, consistent with the model’s objective sense and constraint sense. Record units explicitly.","category":"section"},{"location":"data-model/#VariableValue-(optional)","page":"Data Model","title":"VariableValue (optional)","text":"Stores component-level primal outputs (flows, injections, outputs) to support richer reporting.\n\nFields:\n\ncomponent_id (required): references Component.component_id\nname (required): variable name (e.g., flow, injection, output)\nvalue (required): numeric value\nunit (optional)\ntime (optional)\nscenario (optional)","category":"section"},{"location":"data-model/#Generating-JSON-Schema-from-LinkML","page":"Data Model","title":"Generating JSON Schema from LinkML","text":"CI/CD script makes the JSON Schema automatically but it can also be generated manually:\n\npython -m pip install -U linkml linkml-runtime\n\nlinkml-generate jsonschema \\\n  --no-metadata \\\n  -s spec/linkml/dualsignals.yaml \\\n  > spec/schema/dualsignals.schema.json","category":"section"},{"location":"reporting/#Reporting-utilities","page":"Reporting","title":"Reporting utilities","text":"Reporting helpers wrap analysis output into policy-friendly tables and short plain-language summaries. They are intentionally compact so you can reuse the results in dashboards, reports, or narrative briefs.","category":"section"},{"location":"reporting/#Tables","page":"Reporting","title":"Tables","text":"table_top_constraints(dataset; metric=:abs_dual, top=10, binding_only=true) returns the top constraints ranked by the chosen metric.\n\ntable_policy_priorities(dataset; top=5) returns two lists:\n\nbottlenecks: top binding constraints by |dual|\ncapacity_expansions: top binding capacity constraints by |dual|\n\nThese lists are the basis for “top bottlenecks” and “most valuable expansions.”\n\nUse with_impact=true to add an impact field that interprets dual signs relative to the objective sense (minimize vs maximize) and constraint sense:\n\nle: impact refers to increasing the RHS\nge: impact refers to decreasing the RHS\neq: impact refers to relaxing the equality\n\nThis assumes duals follow the standard convention where they represent the marginal objective change from relaxing a constraint.\n\nOptional sections (auto-enabled when applicable):\n\ninclude_duration=:auto (default) adds time_weighted_bottlenecks when time values are present, using :dual_times_binding_duration.\ninclude_slack_change=:auto (default) adds relaxation_value when slack_change is provided, using :dual_times_slack_change.","category":"section"},{"location":"reporting/#Narratives","page":"Reporting","title":"Narratives","text":"narrative_top_bottlenecks(dataset; top=5) returns a single sentence listing the largest binding constraints by absolute dual.\n\nnarrative_policy_summary(dataset; top=3) returns a short summary combining general bottlenecks and capacity expansions, including an interpretation of the dual sign when objective sense is available.\n\nPass include_duration=true and/or include_slack_change=true to append time-weighted bottlenecks or relaxation-value summaries.","category":"section"},{"location":"","page":"Home","title":"Home","text":"<picture>\n  <source srcset=\"assets/logo-dark.png\" media=\"(prefers-color-scheme: dark)\">\n  <img src=\"assets/logo-light.png\" alt=\"DualSignals.jl logo\" width=\"120\" style=\"vertical-align: middle;\">\n</picture>\n<!-- Reference: assets/logo.png -->","category":"section"},{"location":"#DualSignals.jl","page":"Home","title":"DualSignals.jl","text":"Julia package for standardized extraction and decision-support reporting of shadow prices (duals) and constraint tightness from network and equilibrium models.","category":"section"},{"location":"#Project-info","page":"Home","title":"Project info","text":"Source code: https://github.com/equicirco/DualSignals.jl\nLicense: https://github.com/equicirco/DualSignals.jl/blob/main/LICENSE\nAuthor: Riccardo Boero\nCitation (DOI): https://doi.org/10.5281/zenodo.18071806\n\n@software{Boero_DualSignals_jl,\n  author = {Boero, Riccardo},\n  title = {DualSignals.jl - Julia package for standardized extraction and decision-support reporting of shadow prices (duals) and constraint tightness from network and equilibrium models},\n  doi = {10.5281/zenodo.18071806},\n  url = {https://equicirco.github.io/DualSignals.jl/},\n  year = {2025}\n}","category":"section"},{"location":"#Installation","page":"Home","title":"Installation","text":"DualSignals.jl is available as a package from the Julia General Registry:\n\nusing Pkg\nPkg.add(\"DualSignals\")","category":"section"},{"location":"#What-this-package-does","page":"Home","title":"What this package does","text":"DualSignals.jl helps you turn solved optimization and equilibrium models into decision-ready insights. It provides:\n\nA compact data model for duals, constraints, and components.\nIO utilities to read/write JSON and tabular exports.\nValidation utilities to check consistency of exported results.\nAnalysis helpers for ranking bottlenecks and capacity priorities.\nReporting utilities that summarize results for non-experts.","category":"section"},{"location":"#Documentation-map","page":"Home","title":"Documentation map","text":"Data model specification: Data Model\nRead/write and validation utilities: Data IO\nAnalysis helpers: Analysis\nReporting utilities: Reporting\nJuMP adapter: JuMP Adapter\nNotebook walkthroughs: Notebooks\nExamples: IEEE-14 OPF and CGE","category":"section"},{"location":"io/#Data-IO","page":"Data IO","title":"Data IO","text":"The Julia package includes lightweight IO utilities for reading and writing DualSignals datasets as JSON, plus a simple validator for consistency checks.","category":"section"},{"location":"io/#Functions","page":"Data IO","title":"Functions","text":"","category":"section"},{"location":"io/#read_json(path)","page":"Data IO","title":"read_json(path)","text":"Reads a JSON file into a DualSignalsDataset using JSON3/StructTypes mappings.","category":"section"},{"location":"io/#write_json(path,-dataset;-prettyfalse)","page":"Data IO","title":"write_json(path, dataset; pretty=false)","text":"Writes a dataset to a JSON file. Use pretty=true for human-readable output.","category":"section"},{"location":"io/#to_json_string(dataset;-prettyfalse)","page":"Data IO","title":"to_json_string(dataset; pretty=false)","text":"Returns a JSON string for a dataset (useful for tests or API responses).","category":"section"},{"location":"io/#write_csv(dataset,-dir;-prefix\"dualsignals\")","page":"Data IO","title":"write_csv(dataset, dir; prefix=\"dualsignals\")","text":"Writes a dataset into a directory as multiple CSV files:\n\ndualsignals_metadata.csv\ndualsignals_components.csv\ndualsignals_constraints.csv\ndualsignals_constraint_solutions.csv\ndualsignals_variables.csv (if present)","category":"section"},{"location":"io/#read_csv(dir;-prefix\"dualsignals\")","page":"Data IO","title":"read_csv(dir; prefix=\"dualsignals\")","text":"Reads the CSV directory produced by write_csv and reconstructs a dataset. Constraint and component tags are stored in the CSV as tags columns with semicolon-delimited lists.","category":"section"},{"location":"io/#Optional-Arrow-IO","page":"Data IO","title":"Optional Arrow IO","text":"Arrow support is available if you install Arrow.jl:\n\nimport Pkg\nPkg.add(\"Arrow\")\n\nFunctions:","category":"section"},{"location":"io/#write_arrow(dataset,-dir;-prefix\"dualsignals\")","page":"Data IO","title":"write_arrow(dataset, dir; prefix=\"dualsignals\")","text":"Writes Arrow IPC files (.arrow) for metadata, components, constraints, constraint solutions, and variables.","category":"section"},{"location":"io/#read_arrow(dir;-prefix\"dualsignals\")","page":"Data IO","title":"read_arrow(dir; prefix=\"dualsignals\")","text":"Reads the Arrow IPC files produced by write_arrow.","category":"section"},{"location":"io/#validate_dataset(dataset;-require_unitsfalse)","page":"Data IO","title":"validate_dataset(dataset; require_units=false)","text":"Returns a vector of error strings for:\n\nempty dataset_id\nduplicate component or constraint IDs\nconstraints with no component_ids\nreferences to missing component or constraint IDs\nmissing units (when require_units=true)","category":"section"},{"location":"io/#isvalid_dataset(dataset)","page":"Data IO","title":"isvalid_dataset(dataset)","text":"Convenience wrapper that returns true if validate_dataset returns no errors.","category":"section"},{"location":"io/#Example","page":"Data IO","title":"Example","text":"using DualSignals\n\ndataset = DualSignalsDataset(\n    dataset_id=\"demo\",\n    metadata=DatasetMetadata(description=\"simple example\"),\n    components=[\n        Component(component_id=\"n1\", component_type=DualSignals.node)\n    ],\n    constraints=[\n        Constraint(\n            constraint_id=\"c1\",\n            kind=DualSignals.balance,\n            sense=DualSignals.eq,\n            component_ids=[\"n1\"],\n        )\n    ],\n    constraint_solutions=[\n        ConstraintSolution(constraint_id=\"c1\", dual=1.0)\n    ],\n    variables=nothing,\n)\n\nerrors = validate_dataset(dataset)\n@assert isempty(errors)\n\nwrite_json(\"dualsignals.json\", dataset; pretty=true)\nloaded = read_json(\"dualsignals.json\")","category":"section"}]
}
